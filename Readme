PermiFlow â€” Captez le pouls de la ville
PermiFlow est une web-app de paris immobiliers basÃ©s sur les permis de construire. Les utilisateurs peuvent suivre lâ€™Ã©volution de leur ville ou rÃ©gion, scorer la Â« hype Â» des quartiers et parier sur la valeur future, en toute sÃ©curitÃ© via un systÃ¨me de pool et wallet interne.

ğŸ“Œ FonctionnalitÃ©s clÃ©s
Saisie de ville ou code postal avec filtrage des permis dans un rayon configurable (5â€‘20 km).
Calcul automatisÃ© du score Â« hype-factor Â» (0â€‘100) par zone IRIS en fonction des types de permis, frÃ©quence et autres signaux publics.
Interface de paris UP / DOWN sur lâ€™Ã©volution du score dans une pÃ©riode dÃ©finie (6â€‘18 mois).
Matching automatique des mises entre utilisateurs et distribution des gains aprÃ¨s expiration.
Wallet interne avec paiements Stripe.
Scraping et scoring nocturnes automatisÃ©s (SITADEL, annonces, etc.).
ğŸ’° MonÃ©tisation
Commission sur chaque pari : 3â€‘5 % de la pool.
Abonnement premium : accÃ¨s API, donnÃ©es historiques, levier de mise.
Vente de donnÃ©es anonymisÃ©es (optionnel).
ğŸ§© SchÃ©ma logique PermiFlow
[Utilisateur saisit ville / code postal / rÃ©gion]
                       â”‚
                       â–¼
           [GÃ©ocoding â†’ lat/lon]
                       â”‚
                       â–¼
         [Filtrage des IRIS / permis]
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚Pour chaque IRIS :       â”‚
         â”‚Calcul distance â†’ rayon? â”‚
         â”‚Si oui, inclure          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           [Algorithme scoring 0-100]
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚Input : nb permis, type  â”‚
           â”‚travaux, frÃ©quence, etc. â”‚
           â”‚Output : hype-factor     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
       [Interface utilisateur â€“ propositions]
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚Liste zones avec score hype    â”‚
       â”‚SÃ©lection zone â†’ mise UP/DOWN â”‚
       â”‚Montant pari â†’ validation      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
         [Matching / Pool + wallet interne]
                       â”‚
                       â–¼
           [Distribution gains / pertes]
                       â”‚
                       â–¼
            [Stats / historique pari]
âš™ï¸ Stack technique
Frontend : Next.js + React + TailwindCSS.
Backend / API : Edge Functions / serverless (Vercel).
DB / Auth / Storage : Supabase.
Paiements / Wallet : Stripe.
Scraping & Scoring : Python (pandas, XGBoost) via cron GitHub Actions.
Hosting / DÃ©ploiement : Vercel (PWA responsive).
ğŸ› ï¸ Installation & configuration
Cloner le repo

git clone https://github.com/TON_COMPTE/permiflow.git
cd permiflow
Configurer Supabase

psql -h db.supabase.co -U USERNAME -d DBNAME -f infra/supabase/schema.sql
psql -h db.supabase.co -U USERNAME -d DBNAME -f infra/supabase/seed.sql
Variables Ã  placer dans apps/web/.env.local :

NEXT_PUBLIC_SUPABASE_URL=<your-url>
NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>
Configurer Stripe

STRIPE_SECRET_KEY=<your-secret-key>
STRIPE_PUBLISHABLE_KEY=<your-publishable-key>
Installer les dÃ©pendances

npm install
Lancer frontend & backend

npm run dev        # Frontend http://localhost:3000
npm run dev:api    # Routes serverless /api/*
ğŸ•µï¸ Scraping & scoring nocturne
Scraper SITADEL / sources publiques :

python scraper/scrape_sitadel.py
Scoring nocturne (mise Ã  jour hype-factor) :

python services/model/score_nightly.py
Automatisation : .github/workflows/permiflow.yml programme une exÃ©cution quotidienne (02h00) pour scraping + scoring + dÃ©pÃ´t des rÃ©sultats dans Supabase.

ğŸš€ DÃ©ploiement sur Vercel
Connecter le repo GitHub Ã  Vercel.
DÃ©finir les variables Supabase + Stripe dans le dashboard.
Laisser Vercel builder automatiquement â†’ PWA live.
Ajouter un domaine custom pour le HTTPS.
ğŸ’¡ Tips pour un MVP rapide
Matching simplifiÃ© : cotes fixes, pool fermÃ© pour rester sous lâ€™AMF (< 1â€¯850 â‚¬/user/an).
Rayon par dÃ©faut : 10 km autour de la ville saisie.
Wallet interne : top-up via Stripe, retrait manuel au dÃ©but.
Dashboard admin temps rÃ©el pour suivre mises & gains.
ğŸ“‚ Structure principale du repo
permiflow/
â”œâ”€ apps/web/            # Frontend NextJS
â”œâ”€ api/                 # Serverless endpoints
â”‚  â”œâ”€ bets/             # CRUD paris
â”‚  â”œâ”€ payments/         # Checkout / webhook Stripe
â”‚  â”œâ”€ score/            # Calcul hype-factor
â”‚  â””â”€ settle/           # Distribution pool
â”œâ”€ components/ui/       # Composants React rÃ©utilisables
â”œâ”€ data/                # GeoJSON + mocks
â”œâ”€ hooks/               # useBetStore
â”œâ”€ lib/                 # Clients Supabase + Stripe
â”œâ”€ services/model/      # Scoring / ML
â”œâ”€ scraper/             # Scripts SITADEL
â”œâ”€ worker/              # Settle & nightly updates
â”œâ”€ infra/supabase/      # SQL schema & seed
â””â”€ README.md
ğŸ”— Liens utiles
SITADEL : https://www.data.gouv.fr/fr/datasets/permis-de-construire/
Supabase Docs : https://supabase.com/docs
Stripe Docs : https://stripe.com/docs
Vercel Docs : https://vercel.c
